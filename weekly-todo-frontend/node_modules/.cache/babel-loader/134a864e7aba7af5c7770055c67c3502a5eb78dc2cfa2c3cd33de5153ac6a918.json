{"ast":null,"code":"'use client';\n\nimport { jsx, jsxs } from 'react/jsx-runtime';\nimport { forwardRef, useState, useEffect, useId } from 'react';\nimport { createPortal } from 'react-dom';\nimport { EnvironmentProvider } from '../../providers/environment/environment-provider.js';\nimport { composeRefs } from '../../utils/compose-refs.js';\nimport { useSafeLayoutEffect } from '../../utils/use-safe-layout-effect.js';\nimport { FrameContent } from './frame-content.js';\nconst resetStyle = \"<style>*,*::before,*::after { margin: 0; padding: 0; box-sizing: border-box; }</style>\";\nconst initialSrcDoc = `<html><head>${resetStyle}</head><body><div class=\"frame-root\"></div></body></html>`;\nfunction getMountNode(frame) {\n  const doc = frame.contentWindow?.document;\n  if (!doc) return null;\n  const mountNode = doc.body.querySelector(\".frame-root\") || doc.body;\n  return mountNode;\n}\nconst Frame = forwardRef((props, ref) => {\n  const {\n    children,\n    head,\n    onMount,\n    onUnmount,\n    srcDoc = initialSrcDoc,\n    ...rest\n  } = props;\n  const [frameRef, setFrameRef] = useState(null);\n  const [mountNode, setMountNode] = useState(null);\n  useSafeLayoutEffect(() => {\n    if (!frameRef) return;\n    const doc = frameRef.contentWindow?.document;\n    if (!doc) return;\n    doc.open();\n    doc.write(srcDoc);\n    doc.close();\n    setMountNode(getMountNode(frameRef));\n  }, [frameRef, srcDoc]);\n  useEffect(() => {\n    if (!frameRef || !frameRef.contentDocument) return;\n    const win = frameRef.contentWindow;\n    if (!win) return;\n    const mountNode2 = getMountNode(frameRef);\n    if (!mountNode2) return;\n    const exec = () => {\n      const rootEl = frameRef.contentDocument?.documentElement;\n      if (!rootEl) return;\n      frameRef.style.setProperty(\"--width\", `${mountNode2.scrollWidth}px`);\n      frameRef.style.setProperty(\"--height\", `${mountNode2.scrollHeight}px`);\n    };\n    const resizeObserver = new win.ResizeObserver(exec);\n    exec();\n    if (frameRef.contentDocument) {\n      resizeObserver.observe(mountNode2);\n    }\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [frameRef]);\n  return /* @__PURE__ */jsx(EnvironmentProvider, {\n    value: () => frameRef?.contentDocument ?? document,\n    children: /* @__PURE__ */jsxs(\"iframe\", {\n      title: `frame:${useId()}`,\n      ref: composeRefs(ref, setFrameRef),\n      ...rest,\n      children: [mountNode ? createPortal(/* @__PURE__ */jsx(FrameContent, {\n        onMount,\n        onUnmount,\n        children\n      }), mountNode) : null, head && frameRef ? createPortal(head, frameRef.contentDocument.head) : null]\n    })\n  });\n});\nexport { Frame };","map":{"version":3,"names":["jsx","jsxs","forwardRef","useState","useEffect","useId","createPortal","EnvironmentProvider","composeRefs","useSafeLayoutEffect","FrameContent","resetStyle","initialSrcDoc","getMountNode","frame","doc","contentWindow","document","mountNode","body","querySelector","Frame","props","ref","children","head","onMount","onUnmount","srcDoc","rest","frameRef","setFrameRef","setMountNode","open","write","close","contentDocument","win","mountNode2","exec","rootEl","documentElement","style","setProperty","scrollWidth","scrollHeight","resizeObserver","ResizeObserver","observe","disconnect","value","title"],"sources":["C:/Users/tuanl/weekly-todo-frontend/node_modules/@ark-ui/react/dist/components/frame/frame.js"],"sourcesContent":["'use client';\nimport { jsx, jsxs } from 'react/jsx-runtime';\nimport { forwardRef, useState, useEffect, useId } from 'react';\nimport { createPortal } from 'react-dom';\nimport { EnvironmentProvider } from '../../providers/environment/environment-provider.js';\nimport { composeRefs } from '../../utils/compose-refs.js';\nimport { useSafeLayoutEffect } from '../../utils/use-safe-layout-effect.js';\nimport { FrameContent } from './frame-content.js';\n\nconst resetStyle = \"<style>*,*::before,*::after { margin: 0; padding: 0; box-sizing: border-box; }</style>\";\nconst initialSrcDoc = `<html><head>${resetStyle}</head><body><div class=\"frame-root\"></div></body></html>`;\nfunction getMountNode(frame) {\n  const doc = frame.contentWindow?.document;\n  if (!doc) return null;\n  const mountNode = doc.body.querySelector(\".frame-root\") || doc.body;\n  return mountNode;\n}\nconst Frame = forwardRef((props, ref) => {\n  const { children, head, onMount, onUnmount, srcDoc = initialSrcDoc, ...rest } = props;\n  const [frameRef, setFrameRef] = useState(null);\n  const [mountNode, setMountNode] = useState(null);\n  useSafeLayoutEffect(() => {\n    if (!frameRef) return;\n    const doc = frameRef.contentWindow?.document;\n    if (!doc) return;\n    doc.open();\n    doc.write(srcDoc);\n    doc.close();\n    setMountNode(getMountNode(frameRef));\n  }, [frameRef, srcDoc]);\n  useEffect(() => {\n    if (!frameRef || !frameRef.contentDocument) return;\n    const win = frameRef.contentWindow;\n    if (!win) return;\n    const mountNode2 = getMountNode(frameRef);\n    if (!mountNode2) return;\n    const exec = () => {\n      const rootEl = frameRef.contentDocument?.documentElement;\n      if (!rootEl) return;\n      frameRef.style.setProperty(\"--width\", `${mountNode2.scrollWidth}px`);\n      frameRef.style.setProperty(\"--height\", `${mountNode2.scrollHeight}px`);\n    };\n    const resizeObserver = new win.ResizeObserver(exec);\n    exec();\n    if (frameRef.contentDocument) {\n      resizeObserver.observe(mountNode2);\n    }\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [frameRef]);\n  return /* @__PURE__ */ jsx(EnvironmentProvider, { value: () => frameRef?.contentDocument ?? document, children: /* @__PURE__ */ jsxs(\"iframe\", { title: `frame:${useId()}`, ref: composeRefs(ref, setFrameRef), ...rest, children: [\n    mountNode ? createPortal(\n      /* @__PURE__ */ jsx(FrameContent, { onMount, onUnmount, children }),\n      mountNode\n    ) : null,\n    head && frameRef ? createPortal(head, frameRef.contentDocument.head) : null\n  ] }) });\n});\n\nexport { Frame };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}