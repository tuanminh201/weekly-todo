{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { raf, addDomEvent, getWindow, contains, getEventTarget, dataAttr, visuallyHiddenStyle, isSelfTarget } from '@zag-js/dom-query';\nimport { getAcceptAttrString, isFileEqual, isValidFileType, isValidFileSize, getFileEntries } from '@zag-js/file-utils';\nimport { formatBytes } from '@zag-js/i18n-utils';\nimport { createProps } from '@zag-js/types';\nimport { callAll, createSplitProps, flatArray } from '@zag-js/utils';\nimport { createMachine } from '@zag-js/core';\n\n// src/file-upload.anatomy.ts\nvar anatomy = createAnatomy(\"file-upload\").parts(\"root\", \"dropzone\", \"item\", \"itemDeleteTrigger\", \"itemGroup\", \"itemName\", \"itemPreview\", \"itemPreviewImage\", \"itemSizeText\", \"label\", \"trigger\", \"clearTrigger\");\nvar parts = anatomy.build();\n\n// src/file-upload.dom.ts\nvar getRootId = ctx => ctx.ids?.root ?? `file:${ctx.id}`;\nvar getDropzoneId = ctx => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`;\nvar getHiddenInputId = ctx => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`;\nvar getTriggerId = ctx => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`;\nvar getLabelId = ctx => ctx.ids?.label ?? `file:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`;\nvar getItemNameId = (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`;\nvar getItemSizeTextId = (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`;\nvar getItemPreviewId = (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`;\nvar getRootEl = ctx => ctx.getById(getRootId(ctx));\nvar getHiddenInputEl = ctx => ctx.getById(getHiddenInputId(ctx));\nvar getDropzoneEl = ctx => ctx.getById(getDropzoneId(ctx));\nfunction isEventWithFiles(event) {\n  const target = getEventTarget(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some(type => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount) {\n  const {\n    context,\n    prop,\n    computed\n  } = ctx;\n  if (!computed(\"multiple\") && incomingCount > 1) return false;\n  if (!computed(\"multiple\") && incomingCount + context.get(\"acceptedFiles\").length === 2) return true;\n  if (incomingCount + context.get(\"acceptedFiles\").length > prop(\"maxFiles\")) return false;\n  return true;\n}\nfunction getFilesFromEvent(ctx, files) {\n  const {\n    context,\n    prop,\n    computed\n  } = ctx;\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  files.forEach(file => {\n    const [accepted, acceptError] = isValidFileType(file, computed(\"acceptAttr\"));\n    const [sizeMatch, sizeError] = isValidFileSize(file, prop(\"minFileSize\"), prop(\"maxFileSize\"));\n    const validateErrors = prop(\"validate\")?.(file, {\n      acceptedFiles: context.get(\"acceptedFiles\"),\n      rejectedFiles: context.get(\"rejectedFiles\")\n    });\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...(validateErrors ?? []));\n      rejectedFiles.push({\n        file,\n        errors: errors.filter(Boolean)\n      });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length)) {\n    acceptedFiles.forEach(file => {\n      rejectedFiles.push({\n        file,\n        errors: [\"TOO_MANY_FILES\"]\n      });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\nfunction setInputFiles(inputEl, files) {\n  const win = getWindow(inputEl);\n  try {\n    if (\"DataTransfer\" in win) {\n      const dataTransfer = new win.DataTransfer();\n      files.forEach(file => {\n        dataTransfer.items.add(file);\n      });\n      inputEl.files = dataTransfer.files;\n    }\n  } catch {}\n}\n\n// src/file-upload.connect.ts\nfunction connect(service, normalize) {\n  const {\n    state,\n    send,\n    prop,\n    computed,\n    scope,\n    context\n  } = service;\n  const disabled = prop(\"disabled\");\n  const allowDrop = prop(\"allowDrop\");\n  const translations = prop(\"translations\");\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    openFilePicker() {\n      if (disabled) return;\n      send({\n        type: \"OPEN\"\n      });\n    },\n    deleteFile(file) {\n      send({\n        type: \"FILE.DELETE\",\n        file\n      });\n    },\n    acceptedFiles: context.get(\"acceptedFiles\"),\n    rejectedFiles: context.get(\"rejectedFiles\"),\n    setFiles(files) {\n      const count = files.length;\n      send({\n        type: \"FILES.SET\",\n        files,\n        count\n      });\n    },\n    clearRejectedFiles() {\n      send({\n        type: \"REJECTED_FILES.CLEAR\"\n      });\n    },\n    clearFiles() {\n      send({\n        type: \"FILES.CLEAR\"\n      });\n    },\n    getFileSize(file) {\n      return formatBytes(file.size, prop(\"locale\"));\n    },\n    createFileUrl(file, cb) {\n      const win = scope.getWin();\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({\n        type: \"FILES.SET\",\n        files\n      });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: prop(\"dir\"),\n        id: getDropzoneId(scope),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (!isSelfTarget(event)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({\n            type: \"DROPZONE.CLICK\",\n            src: \"keydown\"\n          });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          if (!isSelfTarget(event)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send({\n            type: \"DROPZONE.CLICK\"\n          });\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {}\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({\n            type: \"DROPZONE.DRAG_OVER\",\n            count\n          });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if (contains(event.currentTarget, event.relatedTarget)) return;\n          send({\n            type: \"DROPZONE.DRAG_LEAVE\"\n          });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          getFileEntries(event.dataTransfer.items, prop(\"directory\")).then(files => {\n            send({\n              type: \"DROPZONE.DROP\",\n              files: flatArray(files)\n            });\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send({\n            type: \"DROPZONE.FOCUS\"\n          });\n        },\n        onBlur() {\n          if (disabled) return;\n          send({\n            type: \"DROPZONE.BLUR\"\n          });\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: prop(\"dir\"),\n        id: getTriggerId(scope),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if (contains(getDropzoneEl(scope), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send({\n            type: \"OPEN\"\n          });\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: getHiddenInputId(scope),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: prop(\"required\"),\n        capture: prop(\"capture\"),\n        name: prop(\"name\"),\n        accept: computed(\"acceptAttr\"),\n        webkitdirectory: prop(\"directory\") ? \"\" : void 0,\n        multiple: computed(\"multiple\") || prop(\"maxFiles\") > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const {\n            files\n          } = event.currentTarget;\n          send({\n            type: \"FILES.SET\",\n            files: files ? Array.from(files) : []\n          });\n        },\n        style: visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps() {\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        id: getItemId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemNameProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: prop(\"dir\"),\n        id: getItemNameId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: prop(\"dir\"),\n        id: getItemSizeTextId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: prop(\"dir\"),\n        id: getItemPreviewId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const {\n        file,\n        url\n      } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const {\n        file\n      } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({\n            type: \"FILE.DELETE\",\n            file\n          });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        hidden: context.get(\"acceptedFiles\").length === 0,\n        \"data-disabled\": dataAttr(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({\n            type: \"FILES.CLEAR\"\n          });\n        }\n      });\n    }\n  };\n}\nvar machine = createMachine({\n  props({\n    props: props2\n  }) {\n    return {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      preventDocumentDrop: true,\n      ...props2,\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: file => `preview of ${file.name}`,\n        deleteFile: file => `delete file ${file.name}`,\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"idle\";\n  },\n  context({\n    prop,\n    bindable,\n    getContext\n  }) {\n    return {\n      acceptedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file, b[i])),\n        hash(value) {\n          return value.map(file => `${file.name}-${file.size}`).join(\",\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileAccept\")?.({\n            files: value\n          });\n          prop(\"onFileChange\")?.({\n            acceptedFiles: value,\n            rejectedFiles: ctx.get(\"rejectedFiles\")\n          });\n        }\n      })),\n      rejectedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file.file, b[i].file)),\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileReject\")?.({\n            files: value\n          });\n          prop(\"onFileChange\")?.({\n            acceptedFiles: ctx.get(\"acceptedFiles\"),\n            rejectedFiles: value\n          });\n        }\n      }))\n    };\n  },\n  computed: {\n    acceptAttr: ({\n      prop\n    }) => getAcceptAttrString(prop(\"accept\")),\n    multiple: ({\n      prop\n    }) => prop(\"maxFiles\") > 1\n  },\n  watch({\n    track,\n    context,\n    action\n  }) {\n    track([() => context.hash(\"acceptedFiles\")], () => {\n      action([\"syncInputElement\"]);\n    });\n  },\n  on: {\n    \"FILES.SET\": {\n      actions: [\"setFilesFromEvent\"]\n    },\n    \"FILE.DELETE\": {\n      actions: [\"removeFile\"]\n    },\n    \"FILES.CLEAR\": {\n      actions: [\"clearFiles\"]\n    },\n    \"REJECTED_FILES.CLEAR\": {\n      actions: [\"clearRejectedFiles\"]\n    }\n  },\n  effects: [\"preventDocumentDrop\"],\n  states: {\n    idle: {\n      on: {\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.FOCUS\": {\n          target: \"focused\"\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    focused: {\n      on: {\n        \"DROPZONE.BLUR\": {\n          target: \"idle\"\n        },\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    dragging: {\n      on: {\n        \"DROPZONE.DROP\": {\n          target: \"idle\",\n          actions: [\"setFilesFromEvent\"]\n        },\n        \"DROPZONE.DRAG_LEAVE\": {\n          target: \"idle\"\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      preventDocumentDrop({\n        prop,\n        scope\n      }) {\n        if (!prop(\"preventDocumentDrop\")) return;\n        if (!prop(\"allowDrop\")) return;\n        if (prop(\"disabled\")) return;\n        const doc = scope.getDoc();\n        const onDragOver = event => {\n          event?.preventDefault();\n        };\n        const onDrop = event => {\n          if (contains(getRootEl(scope), getEventTarget(event))) return;\n          event.preventDefault();\n        };\n        return callAll(addDomEvent(doc, \"dragover\", onDragOver, false), addDomEvent(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement({\n        scope,\n        context\n      }) {\n        queueMicrotask(() => {\n          const inputEl = getHiddenInputEl(scope);\n          if (!inputEl) return;\n          setInputFiles(inputEl, context.get(\"acceptedFiles\"));\n          const win = scope.getWin();\n          inputEl.dispatchEvent(new win.Event(\"change\", {\n            bubbles: true\n          }));\n        });\n      },\n      openFilePicker({\n        scope\n      }) {\n        raf(() => {\n          getHiddenInputEl(scope)?.click();\n        });\n      },\n      setFilesFromEvent(params) {\n        const {\n          computed,\n          context,\n          event\n        } = params;\n        const result = getFilesFromEvent(params, event.files);\n        const {\n          acceptedFiles,\n          rejectedFiles\n        } = result;\n        if (computed(\"multiple\")) {\n          context.set(\"acceptedFiles\", prev => [...prev, ...acceptedFiles]);\n          context.set(\"rejectedFiles\", rejectedFiles);\n          return;\n        }\n        if (acceptedFiles.length) {\n          const files = [acceptedFiles[0]];\n          context.set(\"acceptedFiles\", files);\n          context.set(\"rejectedFiles\", rejectedFiles);\n        } else if (rejectedFiles.length) {\n          context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n          context.set(\"rejectedFiles\", rejectedFiles);\n        }\n      },\n      removeFile({\n        context,\n        event\n      }) {\n        const files = context.get(\"acceptedFiles\").filter(file => file !== event.file);\n        const rejectedFiles = context.get(\"rejectedFiles\").filter(item => item.file !== event.file);\n        context.set(\"acceptedFiles\", files);\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      clearRejectedFiles({\n        context\n      }) {\n        context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n        context.set(\"rejectedFiles\", []);\n      },\n      clearFiles({\n        context\n      }) {\n        context.set(\"acceptedFiles\", []);\n        context.set(\"rejectedFiles\", []);\n      }\n    }\n  }\n});\nvar props = createProps()([\"accept\", \"allowDrop\", \"capture\", \"dir\", \"directory\", \"disabled\", \"getRootNode\", \"id\", \"ids\", \"locale\", \"maxFiles\", \"maxFileSize\", \"minFileSize\", \"name\", \"invalid\", \"onFileAccept\", \"onFileReject\", \"onFileChange\", \"preventDocumentDrop\", \"required\", \"translations\", \"validate\"]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"file\"]);\nvar splitItemProps = createSplitProps(itemProps);\nexport { anatomy, connect, itemProps, machine, props, splitItemProps, splitProps };","map":{"version":3,"names":["createAnatomy","raf","addDomEvent","getWindow","contains","getEventTarget","dataAttr","visuallyHiddenStyle","isSelfTarget","getAcceptAttrString","isFileEqual","isValidFileType","isValidFileSize","getFileEntries","formatBytes","createProps","callAll","createSplitProps","flatArray","createMachine","anatomy","parts","build","getRootId","ctx","ids","root","id","getDropzoneId","dropzone","getHiddenInputId","hiddenInput","getTriggerId","trigger","getLabelId","label","getItemId","item","getItemNameId","itemName","getItemSizeTextId","itemSizeText","getItemPreviewId","itemPreview","getRootEl","getById","getHiddenInputEl","getDropzoneEl","isEventWithFiles","event","target","dataTransfer","types","some","type","isFilesWithinRange","incomingCount","context","prop","computed","get","length","getFilesFromEvent","files","acceptedFiles","rejectedFiles","forEach","file","accepted","acceptError","sizeMatch","sizeError","validateErrors","valid","push","errors","filter","Boolean","splice","setInputFiles","inputEl","win","DataTransfer","items","add","connect","service","normalize","state","send","scope","disabled","allowDrop","translations","dragging","matches","focused","openFilePicker","deleteFile","setFiles","count","clearRejectedFiles","clearFiles","getFileSize","size","createFileUrl","cb","getWin","url","URL","createObjectURL","revokeObjectURL","setClipboardFiles","dt","Array","from","reduce","acc","kind","getAsFile","getRootProps","element","attrs","dir","getDropzoneProps","props2","tabIndex","disableClick","role","onKeyDown","defaultPrevented","key","src","onClick","currentTarget","localName","preventDefault","onDragOver","stopPropagation","dropEffect","hasFiles","onDragLeave","relatedTarget","onDrop","then","onFocus","onBlur","getTriggerProps","button","getHiddenInputProps","input","required","capture","name","accept","webkitdirectory","multiple","value","onInput","style","getItemGroupProps","itemGroup","getItemProps","getItemNameProps","getItemSizeTextProps","getItemPreviewProps","getItemPreviewImageProps","isImage","startsWith","Error","img","itemPreviewImage","alt","getItemDeleteTriggerProps","itemDeleteTrigger","getLabelProps","htmlFor","getClearTriggerProps","clearTrigger","hidden","machine","props","minFileSize","maxFileSize","Number","POSITIVE_INFINITY","maxFiles","preventDocumentDrop","initialState","bindable","getContext","defaultValue","isEqual","a","b","every","i","hash","map","join","onChange","acceptAttr","watch","track","action","on","actions","effects","states","idle","OPEN","implementations","doc","getDoc","syncInputElement","queueMicrotask","dispatchEvent","Event","bubbles","click","setFilesFromEvent","params","result","set","prev","removeFile","splitProps","itemProps","splitItemProps"],"sources":["C:/Users/tuanl/weekly-todo-frontend/node_modules/@chakra-ui/react/node_modules/@zag-js/file-upload/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { raf, addDomEvent, getWindow, contains, getEventTarget, dataAttr, visuallyHiddenStyle, isSelfTarget } from '@zag-js/dom-query';\nimport { getAcceptAttrString, isFileEqual, isValidFileType, isValidFileSize, getFileEntries } from '@zag-js/file-utils';\nimport { formatBytes } from '@zag-js/i18n-utils';\nimport { createProps } from '@zag-js/types';\nimport { callAll, createSplitProps, flatArray } from '@zag-js/utils';\nimport { createMachine } from '@zag-js/core';\n\n// src/file-upload.anatomy.ts\nvar anatomy = createAnatomy(\"file-upload\").parts(\n  \"root\",\n  \"dropzone\",\n  \"item\",\n  \"itemDeleteTrigger\",\n  \"itemGroup\",\n  \"itemName\",\n  \"itemPreview\",\n  \"itemPreviewImage\",\n  \"itemSizeText\",\n  \"label\",\n  \"trigger\",\n  \"clearTrigger\"\n);\nvar parts = anatomy.build();\n\n// src/file-upload.dom.ts\nvar getRootId = (ctx) => ctx.ids?.root ?? `file:${ctx.id}`;\nvar getDropzoneId = (ctx) => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`;\nvar getHiddenInputId = (ctx) => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`;\nvar getTriggerId = (ctx) => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`;\nvar getLabelId = (ctx) => ctx.ids?.label ?? `file:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`;\nvar getItemNameId = (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`;\nvar getItemSizeTextId = (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`;\nvar getItemPreviewId = (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`;\nvar getRootEl = (ctx) => ctx.getById(getRootId(ctx));\nvar getHiddenInputEl = (ctx) => ctx.getById(getHiddenInputId(ctx));\nvar getDropzoneEl = (ctx) => ctx.getById(getDropzoneId(ctx));\nfunction isEventWithFiles(event) {\n  const target = getEventTarget(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some((type) => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount) {\n  const { context, prop, computed } = ctx;\n  if (!computed(\"multiple\") && incomingCount > 1) return false;\n  if (!computed(\"multiple\") && incomingCount + context.get(\"acceptedFiles\").length === 2) return true;\n  if (incomingCount + context.get(\"acceptedFiles\").length > prop(\"maxFiles\")) return false;\n  return true;\n}\nfunction getFilesFromEvent(ctx, files) {\n  const { context, prop, computed } = ctx;\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  files.forEach((file) => {\n    const [accepted, acceptError] = isValidFileType(file, computed(\"acceptAttr\"));\n    const [sizeMatch, sizeError] = isValidFileSize(file, prop(\"minFileSize\"), prop(\"maxFileSize\"));\n    const validateErrors = prop(\"validate\")?.(file, {\n      acceptedFiles: context.get(\"acceptedFiles\"),\n      rejectedFiles: context.get(\"rejectedFiles\")\n    });\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...validateErrors ?? []);\n      rejectedFiles.push({ file, errors: errors.filter(Boolean) });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length)) {\n    acceptedFiles.forEach((file) => {\n      rejectedFiles.push({ file, errors: [\"TOO_MANY_FILES\"] });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\nfunction setInputFiles(inputEl, files) {\n  const win = getWindow(inputEl);\n  try {\n    if (\"DataTransfer\" in win) {\n      const dataTransfer = new win.DataTransfer();\n      files.forEach((file) => {\n        dataTransfer.items.add(file);\n      });\n      inputEl.files = dataTransfer.files;\n    }\n  } catch {\n  }\n}\n\n// src/file-upload.connect.ts\nfunction connect(service, normalize) {\n  const { state, send, prop, computed, scope, context } = service;\n  const disabled = prop(\"disabled\");\n  const allowDrop = prop(\"allowDrop\");\n  const translations = prop(\"translations\");\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    openFilePicker() {\n      if (disabled) return;\n      send({ type: \"OPEN\" });\n    },\n    deleteFile(file) {\n      send({ type: \"FILE.DELETE\", file });\n    },\n    acceptedFiles: context.get(\"acceptedFiles\"),\n    rejectedFiles: context.get(\"rejectedFiles\"),\n    setFiles(files) {\n      const count = files.length;\n      send({ type: \"FILES.SET\", files, count });\n    },\n    clearRejectedFiles() {\n      send({ type: \"REJECTED_FILES.CLEAR\" });\n    },\n    clearFiles() {\n      send({ type: \"FILES.CLEAR\" });\n    },\n    getFileSize(file) {\n      return formatBytes(file.size, prop(\"locale\"));\n    },\n    createFileUrl(file, cb) {\n      const win = scope.getWin();\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({ type: \"FILES.SET\", files });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: prop(\"dir\"),\n        id: getDropzoneId(scope),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        \"data-disabled\": dataAttr(disabled),\n        \"data-dragging\": dataAttr(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (!isSelfTarget(event)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({ type: \"DROPZONE.CLICK\", src: \"keydown\" });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          if (!isSelfTarget(event)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send({ type: \"DROPZONE.CLICK\" });\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({ type: \"DROPZONE.DRAG_OVER\", count });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if (contains(event.currentTarget, event.relatedTarget)) return;\n          send({ type: \"DROPZONE.DRAG_LEAVE\" });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          getFileEntries(event.dataTransfer.items, prop(\"directory\")).then((files) => {\n            send({ type: \"DROPZONE.DROP\", files: flatArray(files) });\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.FOCUS\" });\n        },\n        onBlur() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.BLUR\" });\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: prop(\"dir\"),\n        id: getTriggerId(scope),\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"data-invalid\": dataAttr(prop(\"invalid\")),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if (contains(getDropzoneEl(scope), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send({ type: \"OPEN\" });\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: getHiddenInputId(scope),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: prop(\"required\"),\n        capture: prop(\"capture\"),\n        name: prop(\"name\"),\n        accept: computed(\"acceptAttr\"),\n        webkitdirectory: prop(\"directory\") ? \"\" : void 0,\n        multiple: computed(\"multiple\") || prop(\"maxFiles\") > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const { files } = event.currentTarget;\n          send({ type: \"FILES.SET\", files: files ? Array.from(files) : [] });\n        },\n        style: visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps() {\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        id: getItemId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemNameProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: prop(\"dir\"),\n        id: getItemNameId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: prop(\"dir\"),\n        id: getItemSizeTextId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: prop(\"dir\"),\n        id: getItemPreviewId(scope, file.name),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const { file, url } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const { file } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        \"data-disabled\": dataAttr(disabled),\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({ type: \"FILE.DELETE\", file });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": dataAttr(disabled)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        hidden: context.get(\"acceptedFiles\").length === 0,\n        \"data-disabled\": dataAttr(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({ type: \"FILES.CLEAR\" });\n        }\n      });\n    }\n  };\n}\nvar machine = createMachine({\n  props({ props: props2 }) {\n    return {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      preventDocumentDrop: true,\n      ...props2,\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: (file) => `preview of ${file.name}`,\n        deleteFile: (file) => `delete file ${file.name}`,\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"idle\";\n  },\n  context({ prop, bindable, getContext }) {\n    return {\n      acceptedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file, b[i])),\n        hash(value) {\n          return value.map((file) => `${file.name}-${file.size}`).join(\",\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileAccept\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: value, rejectedFiles: ctx.get(\"rejectedFiles\") });\n        }\n      })),\n      rejectedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => isFileEqual(file.file, b[i].file)),\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileReject\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: ctx.get(\"acceptedFiles\"), rejectedFiles: value });\n        }\n      }))\n    };\n  },\n  computed: {\n    acceptAttr: ({ prop }) => getAcceptAttrString(prop(\"accept\")),\n    multiple: ({ prop }) => prop(\"maxFiles\") > 1\n  },\n  watch({ track, context, action }) {\n    track([() => context.hash(\"acceptedFiles\")], () => {\n      action([\"syncInputElement\"]);\n    });\n  },\n  on: {\n    \"FILES.SET\": {\n      actions: [\"setFilesFromEvent\"]\n    },\n    \"FILE.DELETE\": {\n      actions: [\"removeFile\"]\n    },\n    \"FILES.CLEAR\": {\n      actions: [\"clearFiles\"]\n    },\n    \"REJECTED_FILES.CLEAR\": {\n      actions: [\"clearRejectedFiles\"]\n    }\n  },\n  effects: [\"preventDocumentDrop\"],\n  states: {\n    idle: {\n      on: {\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.FOCUS\": {\n          target: \"focused\"\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    focused: {\n      on: {\n        \"DROPZONE.BLUR\": {\n          target: \"idle\"\n        },\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    dragging: {\n      on: {\n        \"DROPZONE.DROP\": {\n          target: \"idle\",\n          actions: [\"setFilesFromEvent\"]\n        },\n        \"DROPZONE.DRAG_LEAVE\": {\n          target: \"idle\"\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      preventDocumentDrop({ prop, scope }) {\n        if (!prop(\"preventDocumentDrop\")) return;\n        if (!prop(\"allowDrop\")) return;\n        if (prop(\"disabled\")) return;\n        const doc = scope.getDoc();\n        const onDragOver = (event) => {\n          event?.preventDefault();\n        };\n        const onDrop = (event) => {\n          if (contains(getRootEl(scope), getEventTarget(event))) return;\n          event.preventDefault();\n        };\n        return callAll(addDomEvent(doc, \"dragover\", onDragOver, false), addDomEvent(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement({ scope, context }) {\n        queueMicrotask(() => {\n          const inputEl = getHiddenInputEl(scope);\n          if (!inputEl) return;\n          setInputFiles(inputEl, context.get(\"acceptedFiles\"));\n          const win = scope.getWin();\n          inputEl.dispatchEvent(new win.Event(\"change\", { bubbles: true }));\n        });\n      },\n      openFilePicker({ scope }) {\n        raf(() => {\n          getHiddenInputEl(scope)?.click();\n        });\n      },\n      setFilesFromEvent(params) {\n        const { computed, context, event } = params;\n        const result = getFilesFromEvent(params, event.files);\n        const { acceptedFiles, rejectedFiles } = result;\n        if (computed(\"multiple\")) {\n          context.set(\"acceptedFiles\", (prev) => [...prev, ...acceptedFiles]);\n          context.set(\"rejectedFiles\", rejectedFiles);\n          return;\n        }\n        if (acceptedFiles.length) {\n          const files = [acceptedFiles[0]];\n          context.set(\"acceptedFiles\", files);\n          context.set(\"rejectedFiles\", rejectedFiles);\n        } else if (rejectedFiles.length) {\n          context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n          context.set(\"rejectedFiles\", rejectedFiles);\n        }\n      },\n      removeFile({ context, event }) {\n        const files = context.get(\"acceptedFiles\").filter((file) => file !== event.file);\n        const rejectedFiles = context.get(\"rejectedFiles\").filter((item) => item.file !== event.file);\n        context.set(\"acceptedFiles\", files);\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      clearRejectedFiles({ context }) {\n        context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n        context.set(\"rejectedFiles\", []);\n      },\n      clearFiles({ context }) {\n        context.set(\"acceptedFiles\", []);\n        context.set(\"rejectedFiles\", []);\n      }\n    }\n  }\n});\nvar props = createProps()([\n  \"accept\",\n  \"allowDrop\",\n  \"capture\",\n  \"dir\",\n  \"directory\",\n  \"disabled\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"locale\",\n  \"maxFiles\",\n  \"maxFileSize\",\n  \"minFileSize\",\n  \"name\",\n  \"invalid\",\n  \"onFileAccept\",\n  \"onFileReject\",\n  \"onFileChange\",\n  \"preventDocumentDrop\",\n  \"required\",\n  \"translations\",\n  \"validate\"\n]);\nvar splitProps = createSplitProps(props);\nvar itemProps = createProps()([\"file\"]);\nvar splitItemProps = createSplitProps(itemProps);\n\nexport { anatomy, connect, itemProps, machine, props, splitItemProps, splitProps };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}